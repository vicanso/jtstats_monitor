nodeunit=function(){this.JSON||(this.JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)d=rep[c],"string"==typeof d&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var assert=this.assert={},types={},core={},nodeunit={},reporter={};return function(){var a={},b=this,c=b.async;"undefined"!=typeof module&&module.exports?module.exports=a:b.async=a,a.noConflict=function(){return b.async=c,a};var d=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},e=function(a,b){if(a.map)return a.map(b);var c=[];return d(a,function(a,d,e){c.push(b(a,d,e))}),c},f=function(a,b,c){return a.reduce?a.reduce(b,c):(d(a,function(a,d,e){c=b(c,a,d,e)}),c)},g=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},h=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1};a.nextTick=function(a){"undefined"!=typeof process&&process.nextTick?process.nextTick(a):setTimeout(a,0)},a.forEach=function(a,b,c){if(!a.length)return c();var e=0;d(a,function(d){b(d,function(b){b?(c(b),c=function(){}):(e+=1,e===a.length&&c())})})},a.forEachSeries=function(a,b,c){if(!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d===a.length?c():e())})};e()};var i=function(b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[a.forEach].concat(c))}},j=function(b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[a.forEachSeries].concat(c))}},k=function(a,b,c,d){var f=[];b=e(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c,d){f[a.index]=d,b(c)})},function(a){d(a,f)})};a.map=i(k),a.mapSeries=j(k),a.reduce=function(b,c,d,e){a.forEachSeries(b,function(a,b){d(c,a,function(a,d){c=d,b(a)})},function(a){e(a,c)})},a.inject=a.reduce,a.foldl=a.reduce,a.reduceRight=function(b,c,d,f){var g=e(b,function(a){return a}).reverse();a.reduce(g,c,d,f)},a.foldr=a.reduceRight;var l=function(a,b,c,d){var f=[];b=e(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&f.push(a),b()})},function(){d(e(f.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};a.filter=i(l),a.filterSeries=j(l),a.select=a.filter,a.selectSeries=a.filterSeries;var m=function(a,b,c,d){var f=[];b=e(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||f.push(a),b()})},function(){d(e(f.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};a.reject=i(m),a.rejectSeries=j(m);var n=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?d(a):b()})},function(){d()})};a.detect=i(n),a.detectSeries=j(n),a.some=function(b,c,d){a.forEach(b,function(a,b){c(a,function(a){a&&(d(!0),d=function(){}),b()})},function(){d(!1)})},a.any=a.some,a.every=function(b,c,d){a.forEach(b,function(a,b){c(a,function(a){a||(d(!1),d=function(){}),b()})},function(){d(!0)})},a.all=a.every,a.sortBy=function(b,c,d){a.map(b,function(a,b){c(a,function(c,d){c?b(c):b(null,{value:a,criteria:d})})},function(a,b){if(a)return d(a);var c=function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0};d(null,e(b.sort(c),function(a){return a.value}))})},a.auto=function(a,b){b=b||function(){};var c=g(a);if(!c.length)return b(null);var e=[],i=[],j=function(a){i.unshift(a)},k=function(a){for(var b=0;b<i.length;b+=1)if(i[b]===a)return void i.splice(b,1)},l=function(){d(i,function(a){a()})};j(function(){e.length===c.length&&b(null)}),d(c,function(c){var d=a[c]instanceof Function?[a[c]]:a[c],g=function(a){a?(b(a),b=function(){}):(e.push(c),l())},i=d.slice(0,Math.abs(d.length-1))||[],m=function(){return f(i,function(a,b){return a&&-1!==h(e,b)},!0)};if(m())d[d.length-1](g);else{var n=function(){m()&&(k(n),d[d.length-1](g))};j(n)}})},a.waterfall=function(b,c){if(!b.length)return c();c=c||function(){};var d=function(b){return function(e){if(e)c(e),c=function(){};else{var f=Array.prototype.slice.call(arguments,1),g=b.next();f.push(g?d(g):c),a.nextTick(function(){b.apply(null,f)})}}};d(a.iterator(b))()},a.parallel=function(b,c){if(c=c||function(){},b.constructor===Array)a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c||null)})},c);else{var d={};a.forEach(g(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}},a.series=function(b,c){if(c=c||function(){},b.constructor===Array)a.mapSeries(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c||null)})},c);else{var d={};a.forEachSeries(g(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}},a.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},a.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var o=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};a.concat=i(o),a.concatSeries=j(o),a.whilst=function(b,c,d){b()?c(function(e){return e?d(e):void a.whilst(b,c,d)}):d()},a.until=function(b,c,d){b()?d():c(function(e){return e?d(e):void a.until(b,c,d)})},a.queue=function(b,c){var d=0,e=[],f={concurrency:c,push:function(b,c){e.push({data:b,callback:c}),a.nextTick(f.process)},process:function(){if(d<f.concurrency&&e.length){var a=e.splice(0,1)[0];d+=1,b(a.data,function(){d-=1,a.callback&&a.callback.apply(a,arguments),f.process()})}},length:function(){return e.length}};return f};var p=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&d(c,function(b){console[a](b)}))}]))}};a.log=p("log"),a.dir=p("dir")}(),function(a){function b(a,b,c,d,e){throw new j.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e})}function c(a,b){return a===b?!0:a instanceof Date&&b instanceof Date?a.getTime()===b.getTime():"object"!=typeof a&&"object"!=typeof b?a==b:f(a,b)}function d(a){return null===a||void 0===a}function e(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function f(a,b){if(d(a)||d(b))return!1;if(a.prototype!==b.prototype)return!1;if(e(a))return e(b)?(a=i.call(a),b=i.call(b),c(a,b)):!1;try{var f,g,j=h(a),k=h(b)}catch(l){return!1}if(j.length!=k.length)return!1;for(j.sort(),k.sort(),g=j.length-1;g>=0;g--)if(j[g]!=k[g])return!1;for(g=j.length-1;g>=0;g--)if(f=j[g],!c(a[f],b[f]))return!1;return!0}function g(a,c,d,e){var f=null,g=!1,h=!0;e=e||"",3==arguments.length?"string"==typeof d&&(e=d,h=!1):2==arguments.length&&(h=!1);try{c()}catch(i){g=!0,f=i}if(a&&!g&&b("Missing expected exception"+(d&&d.name?" ("+d.name+").":".")+(e?" "+e:"")),!a&&g&&h&&f instanceof d&&b("Got unwanted exception"+(d&&d.name?" ("+d.name+").":".")+(e?" "+e:"")),a&&g&&h&&!(f instanceof d)||!a&&g)throw f}var h=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},i=Array.prototype.slice,j=a;j.AssertionError=function(a){this.name="AssertionError",this.message=a.message,this.actual=a.actual,this.expected=a.expected,this.operator=a.operator;var c=a.stackStartFunction||b;Error.captureStackTrace&&Error.captureStackTrace(this,c)},j.AssertionError.super_=Error;var k=function(){this.constructor=j.AssertionError};k.prototype=Error.prototype,j.AssertionError.prototype=new k,j.AssertionError.prototype.toString=function(){return this.message?[this.name+":",this.message].join(" "):[this.name+":",JSON.stringify(this.expected),this.operator,JSON.stringify(this.actual)].join(" ")},j.AssertionError.__proto__=Error.prototype,j.fail=b,j.ok=function(a,c){a||b(a,!0,c,"==",j.ok)},j.equal=function(a,c,d){a!=c&&b(a,c,d,"==",j.equal)},j.notEqual=function(a,c,d){a==c&&b(a,c,d,"!=",j.notEqual)},j.deepEqual=function(a,d,e){c(a,d)||b(a,d,e,"deepEqual",j.deepEqual)},j.notDeepEqual=function(a,d,e){c(a,d)&&b(a,d,e,"notDeepEqual",j.notDeepEqual)},j.strictEqual=function(a,c,d){a!==c&&b(a,c,d,"===",j.strictEqual)},j.notStrictEqual=function(a,c,d){a===c&&b(a,c,d,"!==",j.notStrictEqual)},j.throws=function(){g.apply(this,[!0].concat(i.call(arguments)))},j.doesNotThrow=function(){g.apply(this,[!1].concat(i.call(arguments)))},j.ifError=function(a){if(a)throw a}}(assert),function(a){a.assertion=function(a){return{method:a.method||"",message:a.message||a.error&&a.error.message||"",error:a.error,passed:function(){return!this.error},failed:function(){return Boolean(this.error)}}},a.assertionList=function(a,b){var c=a||[];return c.failures=function(){for(var a=0,b=0;b<this.length;b++)this[b].failed()&&a++;return a},c.passes=function(){return c.length-c.failures()},c.duration=b||0,c};var b=function(b){return function(c,d,e){return function(){var f=arguments[e-1],g=a.assertion({method:c,message:f});try{assert[d].apply(null,arguments)}catch(h){g.error=h}b(g)}}};a.test=function(c,d,e,f){var g,h=[],i=b(function(a){h.push(a),e.log&&async.nextTick(function(){e.log(a)})}),j={done:function(b){if(void 0!==g&&g!==h.length){var i=new Error("Expected "+g+" assertions, "+h.length+" ran"),j=a.assertion({method:"expect",error:i});h.push(j),e.log&&async.nextTick(function(){e.log(j)})}if(b){var k=a.assertion({error:b});h.push(k),e.log&&async.nextTick(function(){e.log(k)})}var l=(new Date).getTime();async.nextTick(function(){var b=a.assertionList(h,l-d);e.testDone(c,b),f(null,h)})},ok:i("ok","ok",2),same:i("same","deepEqual",3),equals:i("equals","equal",3),expect:function(a){g=a},_assertion_list:h};for(var k in assert)assert.hasOwnProperty(k)&&(j[k]=i(k,k,assert[k].length));return j},a.options=function(a){var b=function(b){a[b]=a[b]||function(){}};return b("moduleStart"),b("moduleDone"),b("testStart"),b("testDone"),a}}(types),function(a){var b=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};a.runTest=function(a,b,c,d){var e=types.options(c);e.testStart(a);var f=(new Date).getTime(),g=types.test(a,f,e,d);try{b(g)}catch(h){g.done(h)}},a.runSuite=function(c,d,e,f){var g=b(d);async.concatSeries(g,function(b,f){var g,h=d[b];g=c?[].concat(c,b):[b],g.toString=function(){return this.join(" - ")},"function"==typeof h?a.runTest(g,d[b],e,f):a.runSuite(g,d[b],e,f)},f)},a.runModule=function(b,c,d,e){var f=types.options(d);f.moduleStart(b);var g=(new Date).getTime();a.runSuite(null,c,d,function(a,c){var d=(new Date).getTime(),h=types.assertionList(c,d-g);f.moduleDone(b,h),e(null,c)})},a.runModules=function(c,d){var e=types.options(d),f=(new Date).getTime();async.concatSeries(b(c),function(b,d){a.runModule(b,c[b],e,d)},function(a,b){var c=(new Date).getTime();e.done(types.assertionList(b,c-f))})};var c=function(a,b,c){return function(d){var e={};if(b){var f=d.done;d.done=function(a){try{b.call(e,function(b){return a&&b?(d._assertion_list.push(types.assertion({error:a})),f(b)):void f(a||b)})}catch(c){f(c)}}}a?a.call(e,function(a){return a?d.done(a):void c.call(e,d)}):c.call(e,d)}},d=function(a,e,f){for(var g={},h=b(f),i=0;i<h.length;i++){var j=h[i];"function"==typeof f[j]?g[j]=c(a,e,f[j]):"object"==typeof f[j]&&(g[j]=d(a,e,f[j]))}return g};a.testCase=function(a){var b=a.setUp,c=a.tearDown;return delete a.setUp,delete a.tearDown,d(b,c,a)}}(core),function(a){a.info="Browser-based test reporter",a.run=function(a){function b(a,b){"innerText"in a?a.innerText=b:"textContent"in a&&(a.textContent=b)}function c(a,b){var c=document.getElementById(b);return c||(c=document.createElement(a),c.id=b,document.body.appendChild(c)),c}var d=(new Date).getTime(),e=(c("h1","nodeunit-header"),c("h2","nodeunit-banner")),f=c("h2","nodeunit-userAgent"),g=c("ol","nodeunit-tests"),h=c("p","nodeunit-testresult");b(f,navigator.userAgent),nodeunit.runModules(a,{moduleStart:function(){},testDone:function(a,b){var c=document.createElement("li"),d=document.createElement("strong");d.innerHTML=a+' <b style="color: black;">(<b class="fail">'+b.failures()+'</b>, <b class="pass">'+b.passes()+"</b>, "+b.length+")</b>",c.className=b.failures()?"fail":"pass",c.appendChild(d);var e=document.createElement("ol");e.style.display="none",c.onclick=function(){var a=e.style.display;e.style.display="none"==a?"block":"none"};for(var f=0;f<b.length;f++){var h=document.createElement("li"),i=b[f];i.failed()?(h.innerHTML=(i.message||i.method||"no message")+"<pre>"+(i.error.stack||i.error)+"</pre>",h.className="fail"):(h.innerHTML=i.message||i.method||"no message",h.className="pass"),e.appendChild(h)}c.appendChild(e),g.appendChild(c)},done:function(a){var b=(new Date).getTime(),c=b-d,f=a.failures();e.className=f?"fail":"pass",h.innerHTML="Tests completed in "+c+' milliseconds.<br/><span class="passed">'+a.passes()+'</span> assertions of <span class="all">'+a.length+"<span> passed, "+a.failures()+" failed."}})}}(reporter),nodeunit=core,nodeunit.assert=assert,nodeunit.reporter=reporter,nodeunit.run=reporter.run,nodeunit}();